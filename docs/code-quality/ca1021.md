---
title: 'CA1021: out 매개 변수를 사용하지 마십시오.'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1021
- AvoidOutParameters
helpviewer_keywords:
- AvoidOutParameters
- CA1021
ms.assetid: 970f2304-842c-4fb7-9734-f3871da8d479
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 579b04f26af972ac025b0bfc07bc8dc9eb636d12
ms.sourcegitcommit: 98421670ed0b8170aaa32d3d6f8681298f401a1d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/18/2020
ms.locfileid: "81638024"
---
# <a name="ca1021-avoid-out-parameters"></a>CA1021: out 매개 변수를 사용하지 마십시오.

|||
|-|-|
|TypeName|AvoidOutParameters|
|CheckId|CA1021|
|범주|마이크로소프트.디자인|
|주요 변경 내용|주요 변경|

## <a name="cause"></a>원인
공용 형식의 공용 또는 보호된 `out` 메서드에는 매개 변수가 있습니다.

기본적으로 이 규칙은 외부에서 볼 수 있는 형식만 보이지만 [구성 할 수 있습니다.](#configurability)

## <a name="rule-description"></a>규칙 설명
참조(사용 `out` 또는)로 `ref`형식을 전달하려면 포인터에 대한 경험, 값 형식 및 참조 형식의 차이점 이해, 여러 반환 값으로 메서드처리가 필요합니다. 또한 매개 `out` 변수와 `ref` 매개 변수의 차이는 널리 이해되지 않습니다.

참조 형식이 "참조"로 전달되면 메서드는 매개 변수를 사용하여 개체의 다른 인스턴스를 반환하려고 합니다. 참조 형식을 참조로 전달하는 것은 이중 포인터, 포인터에 대한 포인터 또는 이중 간접 포인터를 사용하는 것으로도 알려져 있습니다. "value"를 전달하는 기본 호출 규칙을 사용하면 참조 형식을 사용하는 매개 변수가 개체에 대한 포인터를 이미 받습니다. 포인터가 가리키는 개체가 아닌 포인터는 값으로 전달됩니다. 값으로 전달한다는 것은 메서드가 참조 형식의 새 인스턴스를 가리키도록 포인터를 변경할 수 없음을 의미합니다. 그러나 가리키는 개체의 내용을 변경할 수 있습니다. 대부분의 응용 프로그램에서는 이 것으로 충분하며 원하는 동작을 생성합니다.

메서드가 다른 인스턴스를 반환해야 하는 경우 메서드의 반환 값을 사용하여 이 작업을 수행합니다. 문자열에서 <xref:System.String?displayProperty=fullName> 작동하는 다양한 메서드에 대한 클래스를 참조하고 문자열의 새 인스턴스를 반환합니다. 이 모델을 사용할 때 호출자는 원래 개체가 보존되는지 여부를 결정해야 합니다.

반환 값은 일반적이고 많이 사용되지만 매개 `out` `ref` 변수의 올바른 적용에는 중간 설계 및 코딩 기술이 필요합니다. 일반 청중을 위해 디자인하는 라이브러리 설계자는 사용자가 `out` 작업 `ref` 또는 매개 변수를 마스터할 것으로 예상해서는 안 됩니다.

## <a name="how-to-fix-violations"></a>위반 문제를 해결하는 방법
값 형식으로 인해 발생하는 이 규칙의 위반을 해결하려면 메서드가 개체를 반환 값으로 반환하도록 합니다. 메서드가 여러 값을 반환해야 하는 경우 값을 포함하는 개체의 단일 인스턴스를 반환하도록 다시 디자인합니다.

참조 유형으로 인해 발생하는 이 규칙의 위반을 해결하려면 원하는 동작이 참조의 새 인스턴스를 반환해야 하는지 확인합니다. 이 경우 메서드는 반환 값을 사용하여 이 작업을 수행해야 합니다.

## <a name="when-to-suppress-warnings"></a>경고를 억제하는 경우
이 규칙에서 경고를 표시하지 않도록 해도 안전합니다. 그러나 이 디자인은 유용성 문제를 일으킬 수 있습니다.

## <a name="configurability"></a>구성 가능성

레거시 분석기가 아닌 [FxCop 분석기에서](install-fxcop-analyzers.md) 이 규칙을 실행하는 경우 액세스 가능성을 기반으로 이 규칙을 실행할 코드베이스 부분을 구성할 수 있습니다. 예를 들어 비공개 API 표면에 대해서만 규칙을 실행하도록 지정하려면 프로젝트의 .editorconfig 파일에 다음 키 값 쌍을 추가합니다.

```ini
dotnet_code_quality.ca1021.api_surface = private, internal
```

이 규칙, 모든 규칙 또는 이 범주의 모든 규칙(디자인)에 대해이 옵션을 구성할 수 있습니다. 자세한 내용은 [FxCop 분석기 구성을](configure-fxcop-analyzers.md)참조하십시오.

## <a name="example"></a>예제
다음 라이브러리는 사용자의 피드백에 대한 응답을 생성하는 클래스의 두 가지 구현을 보여 주십습니다. 첫 번째`BadRefAndOut`구현 () 라이브러리 사용자가 세 개의 반환 값을 관리하도록 합니다. 두 번째`RedesignedRefAndOut`구현 () 은 데이터를 단일 단위로 관리하는`ReplyData`컨테이너 클래스() 인스턴스를 반환하여 사용자 환경을 단순화합니다.

[!code-csharp[FxCop.Design.NoRefOrOut#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_1.cs)]

## <a name="example"></a>예제
다음 응용 프로그램은 사용자의 환경을 보여 줍니다. 다시 디자인된 라이브러리(메서드)에`UseTheSimplifiedClass` 대한 호출이 더 간단하며 메서드에서 반환되는 정보를 쉽게 관리할 수 있습니다. 두 메서드의 출력은 동일합니다.

[!code-csharp[FxCop.Design.TestNoRefOrOut#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_2.cs)]

## <a name="example"></a>예제
다음 예제 라이브러리는 `ref` 참조 형식에 대한 매개 변수가 사용되는 방법을 보여 주며 이 기능을 구현하는 더 나은 방법을 보여 줍니다.

[!code-csharp[FxCop.Design.RefByRefNo#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_3.cs)]

## <a name="example"></a>예제
다음 응용 프로그램은 라이브러리의 각 메서드를 호출하여 동작을 보여 줍니다.

[!code-csharp[FxCop.Design.TestRefByRefNo#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_4.cs)]

이 예제는 다음과 같은 출력을 생성합니다.

```txt
Changing pointer - passed by value:
12345
12345
Changing pointer - passed by reference:
12345
12345 ABCDE
Passing by return value:
12345 ABCDE
```

## <a name="try-pattern-methods"></a>패턴 메서드 사용해 보기

### <a name="description"></a>Description
와 같은 <xref:System.Int32.TryParse%2A?displayProperty=fullName> **try\<Something>** 패턴을 구현하는 메서드는 이 위반을 발생시키지 않습니다. 다음 예제에서는 메서드를 구현하는 구조(값 <xref:System.Int32.TryParse%2A?displayProperty=fullName> 형식)를 보여 주습니다.

### <a name="code"></a>코드
[!code-csharp[FxCop.Design.TryPattern#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_5.cs)]

## <a name="related-rules"></a>관련 규칙
[CA1045: 참조로 참조 형식을 전달하지 않습니다.](../code-quality/ca1045.md)
