---
title: 다중 스레드 응용 프로그램 디버그
description: Visual Studio의 스레드 창 및 디버그 위치 도구 모음을 사용 하 여 디버그
ms.date: 02/14/2020
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- multithreaded debugging, tutorial
- tutorials, multithreaded debugging
ms.assetid: adfbe002-3d7b-42a9-b42a-5ac0903dfc25
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: eb7b7850d8d7582110152d248683f89981933215
ms.sourcegitcommit: 6ef52c2030b37ea7a64fddb32f050ecfb77dd918
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/17/2020
ms.locfileid: "77416375"
---
# <a name="walkthrough-debug-a-multithreaded-app-using-the-threads-window-c-visual-basic-c"></a>연습: 스레드 창 (C#, Visual Basic, C++)을 사용 하 여 다중 스레드 응용 프로그램 디버그

여러 Visual Studio 사용자 인터페이스 요소를 사용 하 여 다중 스레드 응용 프로그램을 디버그할 수 있습니다. 이 문서에서는 코드 편집기 창, **디버그 위치** 도구 모음 및 **스레드** 창에서 다중 스레드 디버깅 기능을 소개 합니다. 다중 스레드 응용 프로그램 디버깅을 위한 다른 도구에 대 한 자세한 내용은 [다중 스레드 앱 디버깅 시작](../debugger/get-started-debugging-multithreaded-apps.md)을 참조 하세요.

이 자습서를 완료 하는 데 몇 분 밖에 걸리지 않으며 다중 스레드 앱 디버깅에 대 한 기본 사항을 익숙해질.

## <a name="create-a-multithreaded-app-project"></a>다중 스레드 응용 프로그램 프로젝트 만들기

이 자습서에서 사용할 다음 다중 스레드 앱 프로젝트를 만듭니다.

1. Visual Studio를 연 다음 새 프로젝트를 만듭니다.

   ::: moniker range=">=vs-2019"

   시작 창이 열려 있지 않으면 **파일** > **시작 창**을 선택합니다.

   시작 창에서 **새 프로젝트 만들기**를 선택합니다.

   **새 프로젝트 만들기** 창에서 검색 상자에 *콘솔*을 입력합니다. 그런 다음 언어 **C#** 목록 **C++** 에서 또는를 선택 하 고 플랫폼 목록에서 **Windows** 를 선택 합니다. 

   언어 및 플랫폼 필터를 적용 한 후 **콘솔 앱 (.net Core)** 또는 C++ **콘솔 앱** 템플릿을 선택 하 고 **다음**을 선택 합니다.

   > [!NOTE]
   > 올바른 템플릿이 표시 되지 않으면 **도구** > 도구 **및 기능 가져오기**...로 이동 하 여 Visual Studio 설치 관리자를 엽니다. **.NET 데스크톱 개발*** 또는 **C++를 사용한 데스크톱 개발** 워크로드를 선택한 다음, **수정**을 선택합니다.

   **새 프로젝트 구성** 창에서 **프로젝트 이름** 상자에 *MyThreadWalkthroughApp* 를 입력 하거나 입력 합니다. 그런 다음, **만들기**를 선택합니다.

   ::: moniker-end
   ::: moniker range="vs-2017"
   메뉴 모음에서 **파일** > **새로 만들기** > **프로젝트**를 차례대로 선택합니다. **새 프로젝트** 대화 상자의 왼쪽 창에서 다음을 선택 합니다.

   - 앱의 경우 **시각적 C#개체** 에서 **Windows 데스크톱**을 선택한 다음 가운데 창에서 **콘솔 앱 (.NET Framework)** 을 선택 합니다. C#
   - 앱의 경우 **시각적 개체 C++** 에서 **windows 데스크톱**을 선택한 다음 **windows 콘솔 응용 프로그램**을 선택 합니다. C++

   **콘솔 앱 (.Net Core)** 또는 C++ **콘솔 앱** 프로젝트 템플릿에 대 한가 표시 되지 않으면 도구 > 도구 **및 기능 가져오기** **...로 이동** 하 여 Visual Studio 설치 관리자를 엽니다. **.NET 데스크톱 개발*** 또는 **C++를 사용한 데스크톱 개발** 워크로드를 선택한 다음, **수정**을 선택합니다.

   그런 다음 *MyThreadWalkthroughApp* 와 같은 이름을 입력 하 고 **확인**을 클릭 합니다.

   **확인**을 선택합니다.
   ::: moniker-end

   새 콘솔 프로젝트가 나타납니다. 프로젝트를 만든 후에 소스 파일이 표시 됩니다. 선택한 언어에 따라 소스 파일을 *Program.cs*, *MyThreadWalkthroughApp*또는 *Module1*이라고 합니다.

1. 소스 파일의 코드를 C# [다중 스레드 앱 디버깅 시작](../debugger/get-started-debugging-multithreaded-apps.md)의 또는 C++ 예제 코드로 바꿉니다.

1. **파일** > **모두 저장**을 선택합니다.

## <a name="start-debugging"></a>디버그 시작

1. 소스 코드에서 다음 줄을 찾습니다.

   ```csharp
   Thread.Sleep(3000);
   Console.WriteLine();
   ```

   ```C++
   Thread::Sleep(3000);
   Console.WriteLine();
   ```

1. 왼쪽 여백을 클릭 하거나 줄을 선택 하 고 **F9**키를 눌러 `Console.WriteLine();` 줄에 중단점을 설정 합니다.

   중단점은 코드 줄 옆의 왼쪽 여백에 빨간색 원으로 표시 됩니다.

1. **디버그** > **디버깅 시작**을 선택 하거나 **F5**키를 누릅니다.

   앱이 디버그 모드에서 시작 되 고 중단점에서 일시 중지 됩니다.

1. 중단 모드에 있는 동안 **디버그** > **Windows** > **스레드**를 선택 하 여 **스레드** 창을 엽니다. **스레드** 및 기타 디버깅 창을 열거나 확인 하려면 디버깅 세션에 있어야 합니다.

## <a name="examine-thread-markers"></a>스레드 마커 검사

1. 소스 코드에서 `Console.WriteLine();` 줄을 찾습니다.

   1. **스레드** 창을 마우스 오른쪽 단추로 클릭 하 고 메뉴에서 소스에 스레드 표시 ![소스](../debugger/media/dbg-multithreaded-show-threads.png "ThreadMarker") 에서 스레드 **표시** 를 선택 합니다.

   이제 소스 코드 줄 옆에 있는 제본용 여백이 *스레드 마커* 아이콘 ![스레드 마커](../debugger/media/dbg-thread-marker.png "스레드 마커")를 표시 합니다. 스레드 마커는 이 위치에서 스레드가 중지되었음을 나타냅니다. 해당 위치에 중지 된 스레드가 둘 이상 있는 경우 ![다중 스레드](../debugger/media/dbg-multithreaded-show-threads.png "여러 스레드") 아이콘이 표시 됩니다.

1. 스레드 마커에 포인터를 올려 놓습니다. 중지 된 스레드 또는 스레드의 이름과 스레드 ID 번호를 보여 주는 DataTip이 나타납니다. 스레드 이름을 `<No Name>`수 있습니다.

   >[!TIP]
   >이름이 없는 스레드를 식별 하는 데 도움이 되도록 **스레드** 창에서 이름을 바꿀 수 있습니다. 스레드를 마우스 오른쪽 단추로 클릭 하 고 **이름 바꾸기**를 선택 합니다.

1. 소스 코드에서 스레드 마커를 마우스 오른쪽 단추로 클릭 하 여 바로 가기 메뉴에서 사용할 수 있는 옵션을 확인 합니다.

## <a name="flag-and-unflag-threads"></a>스레드에 플래그 지정 및 스레드의 플래그 해제

특별히 주의를 기울여야 하는 스레드를 추적 하도록 스레드에 플래그를 지정할 수 있습니다.

소스 코드 편집기 또는 **스레드** 창에서 스레드에 플래그를 지정 하거나 플래그를 해제 합니다. **디버그 위치** 또는 **스레드** 창 도구 모음에서 플래그가 지정 된 스레드만 표시할지 또는 모든 스레드를 표시할지 선택 합니다. 모든 위치에서 선택한 항목은 모든 위치에 영향을 줍니다.

### <a name="flag-and-unflag-threads-in-source-code"></a>소스 코드에서 스레드의 플래그 지정 및 플래그 해제

1. 디버그 위치 도구 모음 > **도구 모음** > **디버그 위치**를 **선택 하 여** **디버그 위치** 도구 모음을 엽니다. 도구 모음 영역에서 마우스 오른쪽 단추를 클릭 하 고 **디버그 위치**를 선택할 수도 있습니다.

1. **디버그 위치** 도구 모음에는 **프로세스**, **스레드**및 **스택 프레임**의 세 가지 필드가 있습니다. **스레드** 목록을 드롭다운 하 고 스레드 수를 확인 합니다. **스레드** 목록에서 현재 실행 중인 스레드는 **>** 기호로 표시 됩니다.

1. 소스 코드 창에서 여백의 스레드 마커 아이콘 위로 마우스를 이동 하 고 DataTip에서 플래그 아이콘 (또는 빈 플래그 아이콘 중 하나)을 선택 합니다. 플래그 아이콘이 빨간색으로 바뀝니다.

   스레드 마커 아이콘을 마우스 오른쪽 단추로 클릭 하 고 **플래그**를 가리킨 다음 바로 가기 메뉴에서 플래그를 지정할 스레드를 선택할 수도 있습니다.

1. **디버그 위치** 도구 모음에서 **스레드** 필드의 오른쪽에 플래그가 지정 된 **스레드만 표시** 아이콘 ![플래그가 지정 된 스레드](../debugger/media/dbg-threads-show-flagged.png "플래그가 지정 된 스레드 표시")표시를 선택 합니다. 하나 이상의 스레드에 플래그가 지정 되지 않은 경우 아이콘이 회색으로 표시 됩니다.

   플래그가 지정 된 스레드만 이제 도구 모음의 **스레드** 드롭다운에 표시 됩니다. 모든 스레드를 다시 표시 하려면 **플래그가 지정 된 스레드만 표시** 아이콘을 다시 선택 합니다.

   >[!TIP]
   >일부 스레드에 플래그를 지정 하면 코드 편집기에 커서를 놓고 마우스 오른쪽 단추를 클릭 한 다음 **플래그가 지정 된 스레드를 커서까지 실행**을 선택할 수 있습니다. 플래그가 지정 된 모든 스레드가 도달할 코드를 선택 해야 합니다. **플래그가 지정 된 스레드를 커서까지 실행** 하면 선택 된 코드 줄에서 스레드를 일시 중지 하므로 [스레드를 고정 및 재개](#bkmk_freeze)하 여 실행 순서를 보다 쉽게 제어할 수 있습니다.

1. 현재 실행 중인 스레드의 플래그가 지정 되거나 플래그가 지정 되지 않은 상태를 전환 하려면 **플래그가 지정 된 스레드 표시 단추만 표시** 하는 단일 플래그 플래그 **지정 상태** 표시 도구 모음 단추를 선택 합니다. 현재 스레드의 플래그 지정은 플래그가 지정 된 스레드만 표시 될 때 현재 스레드를 찾는 데 유용 합니다.

1. 스레드의 플래그를 해제 하려면 소스 코드에서 스레드 마커를 마우스로 가리키고 빨간색 플래그 아이콘을 선택 하 여 선택을 취소 하거나 스레드 마커를 마우스 오른쪽 단추로 클릭 하 고 **플래그**해제를 선택 합니다.

### <a name="flag-and-unflag-threads-in-the-threads-window"></a>스레드 창에서 스레드 플래그 지정 및 플래그 해제

**스레드** 창에서 플래그가 지정 된 스레드에는 옆에 빨간색 플래그 아이콘이 있지만 플래그가 지정 된 스레드 (표시 된 경우)에는 빈 아이콘이 있습니다.

![스레드 창](../debugger/media/dbg-threads-window.png "스레드 창")

플래그 아이콘을 선택 하 여 현재 상태에 따라 스레드 상태를 플래그 지정 또는 플래그 해제로 변경 합니다.

줄을 마우스 오른쪽 단추로 클릭 하 고 바로 가기 메뉴에서 **플래그**지정, 플래그 해제 또는 **모든 스레드** 플래그 **해제를 선택할**수도 있습니다.

**스레드** 창 도구 모음에는 두 플래그 아이콘 중 하나인 Righthand **플래그가 지정 된 스레드만 표시** 단추가 있습니다. **디버그 위치** 도구 모음에 있는 단추와 동일 하 게 작동 하 고 두 단추 중 하나가 두 위치에서 표시를 제어 합니다.

### <a name="other-threads-window-features"></a>기타 스레드 창 기능

**스레드** 창에서 열 머리글을 선택 하 여 해당 열을 기준으로 스레드를 정렬 합니다. 을 다시 선택 하 여 정렬 순서를 반대로 바꿉니다. 모든 스레드가 표시 되는 경우 플래그 아이콘 열을 선택 하면 플래그가 지정 되거나 플래그가 지정 되지 않은 상태로 스레드가 정렬 됩니다.

**스레드** 창의 두 번째 열 (헤더 없음)은 **현재 스레드** 열입니다. 이 열의 노란색 화살표는 현재 실행 위치를 표시 합니다.

**위치** 열에는 각 스레드가 소스 코드에 표시 되는 위치가 표시 됩니다. **위치** 항목 옆에 있는 확장 화살표를 선택 하거나 항목 위로 마우스를 이동 하 여 해당 스레드에 대 한 부분 호출 스택을 표시 합니다.

>[!TIP]
>스레드의 호출 스택에 대 한 그래픽 보기를 사용 하려면 [병렬 스택](../debugger/using-the-parallel-stacks-window.md) 창을 사용 합니다. 디버깅 하는 동안 창을 열려면 **디버그**> **Windows** > **병렬 스택**을 선택 합니다.

**모든 스레드의** **플래그** **지정, 플래그**해제 및 플래그 해제는 물론, **스레드** 창 항목에 대 한 마우스 오른쪽 단추 클릭 상황에 맞는 메뉴에는 다음이 포함 됩니다.

- **소스의 스레드 표시** 단추입니다.
- **스레드** 창의 **스레드 ID**를 10 진수에서 16 진수 형식으로 변경 하는 **16 진수 표시**
- [스레드로 전환](#switch-to-another-thread)하 여 즉시 실행을 해당 스레드로 전환 합니다.
- **이름 바꾸기**-스레드 이름을 변경할 수 있습니다.
- 명령을 [고정 및 재개](#bkmk_freeze) 합니다.

## <a name="bkmk_freeze"></a>스레드 실행 중지 및 재개

스레드를 중지 및 재개 하거나 일시 중지 하 고 다시 시작 하 여 스레드가 작업을 수행 하는 순서를 제어할 수 있습니다. 스레드를 고정 및 재개 하면 교착 상태 및 경합 상태와 같은 동시성 문제를 해결 하는 데 도움이 될 수 있습니다.

> [!TIP]
> 일반적인 디버깅 시나리오 이기도 한 다른 스레드를 동결 하지 않고 단일 스레드를 수행 하려면 [다중 스레드 응용 프로그램 디버깅 시작](../debugger/get-started-debugging-multithreaded-apps.md#bkmk_follow_a_thread)을 참조 하세요.

**스레드를 중지 및 해제하려면:**

1. **스레드** 창에서 스레드를 마우스 오른쪽 단추로 클릭 한 다음 **중지**를 선택 합니다. **현재 스레드** 열의 **일시 중지** 아이콘은 스레드가 고정 되어 있음을 나타냅니다.

1. **스레드** 창 도구 모음에서 **열** 을 선택한 다음 **일시 중단 된 횟수** 를 선택 하 여 **일시 중단 된 개수** 열을 표시 합니다. 고정 된 스레드의 일시 중단 된 횟수 값은 **1**입니다.

1. 고정 된 스레드를 마우스 오른쪽 단추로 클릭 하 고 **재개**를 선택 합니다.

   **일시 중지** 아이콘이 사라지고 **일시 중단 된 횟수** 값이 **0**으로 변경 됩니다.

## <a name="switch-to-another-thread"></a>다른 스레드로 전환

다른 스레드로 전환 하려고 하면 **응용 프로그램이 중단 모드 창에** 표시 될 수 있습니다. 이 창에서는 현재 디버거가 표시할 수 있는 코드가 스레드에 없음을 알려 줍니다. 예를 들어 관리 코드를 디버깅할 수 있지만 스레드는 네이티브 코드입니다. 이 창은 문제를 해결 하기 위한 제안 사항을 제공 합니다.

**다른 스레드로 전환 하려면:**

1. **스레드** 창 **에서 현재 스레드 열에** 노란색 화살표가 있는 스레드인 현재 스레드 ID를 적어 둡니다. 앱을 계속 하려면이 스레드로 다시 전환 합니다.

1. 다른 스레드를 마우스 오른쪽 단추로 클릭 하 고 상황에 맞는 메뉴에서 **스레드로 전환을** 선택 합니다.

1. **스레드** 창에서 노란색 화살표 위치가 변경 되었는지 확인 합니다. 원래 현재 스레드 표식은 개요로 남아 있습니다.

   코드 소스 편집기에서 스레드 표식의 도구 설명을 확인 하 고 **디버그 위치** 도구 모음의 **스레드** 드롭다운에서 목록을 확인 합니다. 현재 스레드만 변경 된 것을 확인할 수 있습니다.

1. **디버그 위치** 도구 모음의 **스레드** 목록에서 다른 스레드를 선택 합니다. 현재 스레드는 다른 두 위치 에서도 변경 됩니다.

1. 소스 코드 편집기에서 스레드 마커를 마우스 오른쪽 단추로 클릭 하 고 **스레드로 전환**을 가리킨 다음 목록에서 다른 스레드를 선택 합니다. 현재 스레드가 세 위치 모두에서 변경 되는지 확인 합니다.

소스 코드의 스레드 마커를 사용 하 여 해당 위치에서 중지 된 스레드만 전환할 수 있습니다. **스레드** 창 및 **디버그 위치** 도구 모음을 사용하면 임의의 스레드로 전환할 수 있습니다.

이제 다중 스레드 앱을 디버깅 하는 기본 사항을 알아보았습니다. **스레드** 창, **디버그 위치** 도구 모음의 **스레드** 목록 또는 소스 코드 편집기의 스레드 마커를 사용 하 여 스레드를 관찰 하 고 플래그를 지정 하거나 해제할 수 있습니다.

## <a name="see-also"></a>참고 항목
- [다중 스레드 애플리케이션 디버그](../debugger/debug-multithreaded-applications-in-visual-studio.md)
- [방법: 디버그 중 다른 스레드로 전환](../debugger/how-to-switch-to-another-thread-while-debugging.md)
