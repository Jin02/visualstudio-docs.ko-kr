---
title: .NET 개체에 대한 메모리 사용량 분석 | Microsoft Docs
ms.date: 12/9/2019
ms.topic: conceptual
helpviewer_keywords:
- memory allocation, memory usage
author: Sagar-S-S
ms.author: sashe
manager: AndSter
ms.workload:
- multiple
ms.openlocfilehash: 9518ffd618a6d82505feca33b37b5151a3a9f961
ms.sourcegitcommit: cc841df335d1d22d281871fe41e74238d2fc52a6
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/18/2020
ms.locfileid: "75886763"
---
# <a name="analyze-memory-usage-using-the-net-object-allocation-tool"></a>.NET 개체 할당 도구를 사용하여 메모리 사용량 분석

.NET 개체 할당 도구를 사용하여 앱에서 사용 중인 메모리의 양과 가장 많은 메모리를 할당하는 코드 경로를 확인할 수 있습니다.

도구를 실행한 후에는 개체가 할당되는 함수 실행 경로를 확인하여 가장 많은 양의 메모리를 차지하는 호출 트리의 루트를 다시 추적할 수 있습니다.

## <a name="setup"></a>설치 프로그램

1. Visual Studio에서 성능 프로파일러(**Alt + F2)** 를 엽니다.
2.  **.NET 개체 할당 추적** 확인란을 선택합니다.

![Diag Hub](../profiling/media/diaghub.png "Diag Hub")

> [!NOTE]
> 시작 프로젝트는 기본적으로 **분석 대상**으로 선택되지만 **대상 변경** 드롭다운 메뉴를 열고 사용 가능한 옵션에서 선택하여 실행 중인 프로세스, 실행 파일, 실행 중인 앱 및 설치된 앱으로 변경할 수 있습니다.

   .NET 개체 할당 도구는 현재 드롭다운 메뉴를 통해 실행 파일을 지원하지 않습니다. 이 도구를 사용하려면 exe 프로젝트 시스템을 수행해야 합니다. 이렇게 하려면 현재 솔루션(**파일** -> **솔루션 닫기**)을 닫은 다음, **파일** -> **프로젝트 또는 솔루션 열기** -> .exe 파일 선택을 누릅니다.

![분석 대상](../profiling/media/analysistarget.png "분석 대상")

3. **시작** 단추를 클릭하여 도구를 실행합니다.

![컬렉션 중지](../profiling/media/stopcollection.png "컬렉션 중지")

4. 도구가 실행되면 앱에서 원하는 시나리오로 이동한 다음, **컬렉션 중지**를 누르거나 앱을 닫아 데이터를 확인합니다.
5. **할당** 탭을 클릭하면 아래와 같은 이미지가 표시됩니다.

![Allocation](../profiling/media/allocation.png "할당")

축하합니다! 이제 개체의 메모리 할당을 분석할 수 있습니다.

## <a name="understand-your-data"></a>데이터 이해

### <a name="collection"></a>컬렉션

![컬렉션](../profiling/media/collection.png "컬렉션")

컬렉션 뷰를 사용하면 가비지 수집 중 수집된 개체 수와 보존된 개체 수를 확인할 수 있습니다. 이 뷰는 수집된 개체와 유지된 개체를 형식별로 시각화하는 몇 가지 원형 차트를 제공합니다.

- **수집됨** 열에는 가비지 수집기에서 수집한 개체 수가 표시됩니다.
- **유지됨** 열에는 가비지 수집기가 실행된 후 남아 있는 개체 수를 표시합니다.

### <a name="allocation"></a>할당

![할당 확장됨](../profiling/media/allocationexpanded.png "할당 확장됨")

할당 뷰를 사용하면 메모리를 할당하는 개체의 위치와 해당 개체가 할당하는 메모리의 양을 확인할 수 있습니다.

- **이름** 열은 메모리를 차지하는 다양한 클래스 및 구조의 목록입니다. 열 내의 각 항목은 메모리를 차지하는 해당 범주 내에 항목이 있을 경우 확장할 수 있는 노드입니다. (**할당** 뷰만 해당)
- **합계(할당)** 열에는 메모리를 차지하는 특정 할당 유형 내의 개체 수가 표시됩니다. (**할당**, **호출 트리** 및 **함수** 뷰)
- **자체(할당)** 열에는 메모리를 차지하는 개별 항목 내의 개체 수가 표시됩니다. (**할당**, **호출 트리** 및 **함수** 뷰)
- 이러한 세 열은 모두 정렬할 수 있습니다. **이름** 열의 경우 항목이 사전 순(앞이나 뒤로)으로 정렬됩니다. **합계** 및 **자체(할당)** 의 경우 번호순(오름차순 또는 내림차순)으로 정렬할 수 있습니다.
- **총 크기(바이트)** 및 **자체 크기(바이트)** 열은 기본적으로 설정되어 있지 않습니다. 이러한 열을 사용하려면 **이름**, **합계** 또는 **자체(할당)** 열을 마우스 오른쪽 단추로 클릭한 다음 **총 크기** 및 **자체 크기** 옵션을 클릭하여 차트에 추가합니다. 두 열은 메모리를 차지하는 개체 수를 표시하는 대신 해당 개체가 차지하는 총 메모리 양(바이트)을 표시한다는 점을 제외하고 **합계(할당)** 및 **자체(할당)** 와 비슷합니다. [할당 뷰만 해당]

### <a name="call-tree"></a>호출 트리

![호출 트리](../profiling/media/calltree.png "호출 트리")

**호출 트리** 뷰에서 많은 메모리를 할당하는 개체를 포함하는 함수 실행 경로를 확인할 수 있습니다.

- **함수 이름** 열에는 조사 중인 노드의 수준에 따라 메모리를 할당하는 개체를 포함하는 함수의 프로세스 또는 이름이 표시됩니다.
- **합계** 및 **자체(할당)** 열에는 **할당** 뷰와 동일한 정보가 표시됩니다.
- **모듈 이름** 열에는 호출하는 함수 또는 프로세스가 포함된 모듈이 표시됩니다.

![실행 부하 과다 경로](../profiling/media/hotpath.png "실행 부하 과다 경로")

- **실행 부하 과다 경로 확장** 단추는 메모리를 할당하는 많은 개체를 포함하는 함수 실행 경로를 강조 표시합니다. 이 알고리즘은 사용자가 선택한 노드에서 시작되며 대부분의 할당 경로를 강조 표시하여 조사에서 사용자를 안내합니다.
- **실행 부하 과다 경로 표시** 단추는 **실행 부하 과다 경로**에 속하는 노드를 나타내는 불꽃 아이콘을 설정하거나 해제합니다.

### <a name="functions"></a>Functions

![함수](../profiling/media/functions.png "Functions")

**함수** 뷰에서는 메모리를 할당하는 프로세스, 모듈 및 함수를 보여 줍니다.

- **Name** 열에는 프로세스가 최상위 노드로 표시됩니다. 프로세스 아래에는 모듈이 있고, 모듈 아래에는 함수가 있습니다.
- **합계** 및 **자체(할당)** 열에는 **할당** 뷰와 동일한 정보가 표시됩니다.

**할당**, **호출 트리**및 **함수** 뷰는 모두 **내 코드만 표시**, **네이티브 코드 표시** 및 **검색** 옵션을 포함합니다.

![필터 표시줄](../profiling/media/filterbar.png "필터 표시줄")

- **내 코드만 표시**는 사용자 코드에 집중할 수 있도록 시스템, 프레임워크 및 기타 사용자 코드가 아닌 코드를 **[외부 코드]** 프레임으로 축소합니다. 자세한 내용은 [내 코드만으로 사용자 코드 디버그](../debugger/just-my-code.md)를 참조하세요.
- **네이티브 코드 표시**는 사용자 코드가 아닌 코드(선택한 경우)를 포함하여 네이티브 코드를 분석 대상 내에 표시합니다.
- **필터 상자**를 사용하면 제공하는 매개 변수에 따라 **이름** 또는 **함수 이름** 열을 필터링할 수 있습니다. 필드와 표에 입력하기만 하면 필터링되어 제공한 문자열을 포함하는 형식만 표시합니다.
